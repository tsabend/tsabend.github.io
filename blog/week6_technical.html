<DOCTYPE!html>

<head>
	<link href='http://fonts.googleapis.com/css?family=Rock+Salt|Permanent+Marker|Goudy+Bookletter+1911|' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="../reset.css">
	<link rel="stylesheet" href="../bootstrap.css">   
	<link rel="stylesheet" href="../index.css">
	<link rel="stylesheet" href="../prettify.css">
	<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
	<title>|| Thomas Abend ||</title>
</head>

<body>

<div class="navbar navbar-fixed-top">
	<div class="container">
	<div class="bar">
		<ul class="pull-left">
			<li><a href="http://tsabend.github.io/index.html">Home</a></li> 
			<li><a href="http://tsabend.github.io/projects.html">Projects</a></li>
		</ul>
		
		
		<ul class="pull-right">
			<li><a href="http://tsabend.github.io/technical.html">Technical Blog</a></li> 
			<li><a href="http://tsabend.github.io/cultural.html">Cultural Blog</a></li> 	
		</ul>
		</div>
		
	</div>
</div>



<article>
<div class="container-fluid side-color">
<div class="row">
		<div class="col-md-3">
		<div class="thumbnail">
        <img src="../images/jetpack.jpg">
        <div class="caption">
		<h3>Technical Blog</h3>
		<p>Check out my technical blog where you can find informational posts about various Ruby mehods and programming paradigms. The blogs are a way for me to internalize what I've learned and share some of my growing knowledge with
		others. The best way to learn something is to teach it.</p>
      	</div>
    	</div>
		</div>

<div class="blog col-md-6">
<h1>Blocks, Procs and Lambdas</h1>
<h5>03:26 PM -- 8/21/14</h5>
<h5>Thomas Abend</h5>
<p>Who doesn't love curly braces? I know I do. Now Ruby might not have as many parentheses, brackets and braces as a language like C, but it still finds some nice uses for curly braces, especially in implementing blocks.</p>
<h3>Blocks</h3>
<p>Putting your code in a block is basically a way of saying "do this code inside these curly braces." (Curly braces aren't actually required, you could use the words 'do' and 'end' instead) You can think of blocks as little self-contained functions. They can even take arguments. Unlike most things in Ruby, blocks aren't objects. Instead blocks are just syntax associated with certain method calls. One of the most common uses of blocks are inside iterators in the #enumerable module. For example the code:</p>
<pre class="prettyprint lang-ruby linenums">
10.times {puts "I am a block"}
</pre>
<p>would just put the string "I am a block" 10 times. Times takes the code in the block and runs it once for each number you decided to use when calling times. What's happening underneath the hood of here is that #times is yielding to the block of code. In Ruby using the keyword yield is a way of giving up control. The function that calls yield temporarily hands the keys over to the block of code that you call it with and runs all the code inside the block before continuing what it was doing. In my example above, #times is yielding to that code 10 times. </p>
<pre class="prettyprint lang-ruby linenums">
def homemade_times(number)
  i = 0
  while number > i
    yield
    i += 1
  end
end

homemade_times(10) {puts "I am a block"}
</pre>
<p>This isn't exactly how Ruby implements #times, but my homemade version is more or less equivalent. Notice how the code block is not part of the argument. The argument is just the number of times. Instead the code block is part of the way you are supposed to call homemade_times because you need to give it something to yield to. Calling homemade_times(10) with no block wouldn't raise an argument error, although it would compain that no block was given. Calling it with an empty block {} would not raise any errors. Yielding to blocks makes the #enumerable module possible. It's really useful because methods that accept blocks are very flexible.</p>
<p>Blocks can even take variables. Use the |variable| syntax to pass variables. Below I've modified homemade_times to take an argument that it will pass into the block.</p>
<pre class="prettyprint lang-ruby linenums">
def homemade_times(number, name)
  i = 0
  while number > i
    yield(name)
    i += 1
  end
end

homemade_times(2, "Thomas") {|x| puts "I am a #{x}"}
#=> I am a Thomas
	I am a Thomas
</pre>
<p>This is the syntax that you typically see with the #enumberable module. You can have more than one variable by adding more variables inside the ||. Now you've seen a little glimpse at the power of blocks.</p>
<h3>Procs</h3>
<p>Unlike blocks, procs and lambdas ARE objects. In fact that's basically the main difference. Because procs and lambdas are objects they can be stored in variables. If you have a great block of code and you want to store it for reuse, use a proc. Let's use a proc to call our homemade_times method. This time instead of just leaving homemade times as a function, we'll incorporate it into our integer class as a method.</p>
<pre class="prettyprint lang-ruby linenums">
def homemade_times(number)
class Integer
  def homemade_times
    i = 0
    while self > i
      yield
      i+=1
    end
  end
end

my_proc = Proc.new {puts "Now I'm really a Proc!"}
my_proc.call #=> Now I'm really a Proc!

5.homemade_times(&my_proc)
#=> Now I'm really a Proc!
	Now I'm really a Proc!
	Now I'm really a Proc!
	Now I'm really a Proc!
	Now I'm really a Proc!
</pre>
<p>Looking at the syntax, procs have a few differences from blocks. First, since they are objects you call them as new instances of the Proc class and can set them equal to variables. When you call those procs you use the & symbol to let the program know it's about to deal with a proc.</p><p>Beyond using procs to save a block of code you liked, you can also combine them with symbols to create some cool functionality. Let's say that you wanted to turn an array of strings into an array of integers using the built in #map function (though remember, we could easily write our own homemade version with blocks and a yield). Check out the implementation below:</p> 
<pre class="prettyprint linenums lang-ruby">
strings = ["10", "20", "30"]
numbers = strings.map(&:to_i)
numbers #=> [10, 20, 30]
</pre>
<p>In this case map goes through each element of the array "strings" and yields the value of the array to the block of code, returning the output of that block to the new array "numbers." By using the symbol in front of to_i you are referencing to_i as a method and the & in front of :to_i turns that into a proc. This is a cool way of telling Ruby to run to_i on every element in the array.</p>
<h3>Lambdas</h3>
<p>Finally, we have lambdas. Lambdas are actually just subset of Procs with slightly different behavior and syntax. The main behavioral difference is that lambdas take a set number of arguments, while procs can take indeterminate numbers of arguments without throwing argument errors. If you give to many arguments to a proc, it ignores them, if you don't give it enough it will automatically assign nil to the missing values. 
<pre class="prettyprint linenums lang-ruby">
my_proc = Proc.new {|x, y| puts "#{x} is better than #{y}"}
my_lambda = lambda {|x, y| puts "#{x} is better than #{y}"}

my_proc.call #=>  is better than
my_proc.call(1, 2) #=> 1 is better than 2
my_proc.call(1, 2, 3) #=> 1 is better than 2

my_lambda.call #=> wrong number of arguments (0 for 2)
my_lambda.call(1, 2) #=> 1 is better than 2
my_lambda.call(1, 2, 3) #=> wrong number of arguments (3 for 2)
</pre>
<p>
	Additionally, the two handle the "return" keyword differently. A lambda will send it's return back to the code that is outside of it, while a proc will return in place and spit the result out immediately. Below is an example of these behavioral differences.</p>
<pre class="prettyprint linenums lang-ruby">
def number_fight_lambda
	my_lambda = lambda {|x, y| return "#{x} is better than #{y}"}	
	my_lambda.call(1, 2)
	return "5 is better than 6"
end

def number_fight_proc
	my_proc	= Proc.new {|x, y| return "#{x} is better than #{y}"}
	my_proc.call(1, 2)
	return "5 is better than 6"
end

puts number_fight_proc #=> 1 is better than 2
puts number_fight_lambda #=> 5 is better than 6
</pre>
<p>Since the proc returns immediately it never runs the 5 is better than 6 code, since the lambda gives control back to the method after return, it does run that code.</p>
<h3>Conclusion</h3>
<p>In summary, blocks are snippets of code that can run with or without arguments. They work when some part of your program decides to "yield" control to them. Blocks aren't objects, but if you wanted a block as an object you could save it in a proc or lambda. Procs are referenced with .call or the & symbol. Procs are objects so they can be called as arguments. A proc can take an argument and if you feed a proc more or less arguments than it's designed to take it will still run. A lambda is a variety of the Proc class that will not work with the wrong number of arguments. Lambda's are also treat the return keyword differently than procs do.</p>
<p>And there it is! The basics of procs, lambdas and blocks. Now go get yourself some curly braced goodness.</p>
				<h3>Sources:</h3>
				<ul>
				<li><a href="">The Well Grounded Rubyist by David Black, Chapters 6 and 14</a></li>
				<li><a href="http://rubylearning.com/satishtalim/ruby_blocks.html">http://rubylearning.com/satishtalim/ruby_blocks.html</a></li>
				<li><a href="http://blog.rubybestpractices.com/posts/gregory/009-beautiful-blocks.html">http://blog.rubybestpractices.com/posts/gregory/009-beautiful-blocks.html</a></li>
				<li><a href="http://awaxman11.github.io/blog/2013/08/05/what-is-the-difference-between-a-block/">http://awaxman11.github.io/blog/2013/08/05/what-is-the-difference-between-a-block/</a></li>
				<li><a href="http://www.codecademy.com/courses/ruby-beginner-en-L3ZCI/0/1?curriculum_id=5059f8619189a5000201fbcb">Code Academy: Ruby</a></li>
			</ul>
			</div>

<div class="col-md-3">
	<div class ="sidebar-module current-blog">
		<h3>Technical Entries</h3>
		<br>
		<hr>
		<ul>
			<li><a href="http://tsabend.github.io/blog/week1_technical">Week 1: Website Design</a></li>
			<li><a href="http://tsabend.github.io/blog/week2_technical">Week 2: Classes vs. IDs</a></li>
			<li><a href="http://tsabend.github.io/blog/week3_technical">Week 3: Why Javascript?</a></li>
			<li><a href="http://tsabend.github.io/blog/week4_technical">Week 4: #map, #awesome</a></li>
			<li><a href="http://tsabend.github.io/blog/week5_technical">Week 5: Feeling Classy</a></li>
			<li><a href="http://tsabend.github.io/blog/week6_technical">Week 6: OOPs</a></li>
			<li><a href="http://tsabend.github.io/blog/week7_technical">Week 7: SQL or Other</a></li>
			<li><a href="http://tsabend.github.io/blog/week8_technical">Week 8: Test Driven Development</a></li>
		</ul>
	</div>
	<div class ="sidebar-module other-blog">
		<h3>Cultural Entries</h3>
		<br>
		<hr>
		<ul>
			<li><a href="http://tsabend.github.io/blog/week1_cultural">Week 1: Let's Get Cookin'</a></li>
			<li><a href="http://tsabend.github.io/blog/week3_cultural">Week 3: Learning Styles</a></li>
			<li><a href="http://tsabend.github.io/blog/week4_cultural">Week 4: Where is my Jetpack?</a></li>
			<li><a href="http://tsabend.github.io/blog/week5_cultural">Week 5: Pairing Is...</a></li>
			<li><a href="http://tsabend.github.io/blog/week6_cultural">Week 6: Stereotype Threats</a></li>
			<li><a href="http://tsabend.github.io/blog/week7_cultural">Week 7: An Underappreciated Virtue</a></li>
			<li><a href="http://tsabend.github.io/blog/week8_cultural">Week 8: Conflict</a></li>
			<li><a href="http://tsabend.github.io/blog/week9_cultural">Week 9: Questions and Research</a></li>
		</ul>
	</div>
	</div>
	</div>

</div>
	</div>
</article>

<div class="linkbar">
	<div class="container">
		<div class ="row text-center">
		<div class="logo">
			<a id="email" href="mailto: tsabend@gmail.com" target="_blank"></a>
			<a id="github" href="http://github.com/tsabend" target="_blank"></a>
			<a id="linkedin" href="http://www.linkedin.com/in/thomasabend" target="_blank"></a>
			<a id="twitter" href="https://twitter.com/tsabend" target="_blank"></a>
			<a id="instagram" href="http://instagram.com/tsabend" target="_blank"></a>
			<a id="music" href="https://myspace.com/viciousmixtapes/music/songs" target="_blank"></a>
		</div>
	</div>
	</div>
</div>

</body>